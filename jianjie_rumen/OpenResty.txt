OpenResty(也称为ngx_openresty)是一个全功能的Web应用服务器。它打包了标准的Nginx核
心，很多的常用的第三方模块，以及他们的大多数依赖项。

通过柔和众多设计良好的Nginx模块，OpenResty有效地把Nginx服务器转变为一个强大的Web
应用服务器，基于它开发人员可以使用Lua编程语言对Nginx核心以及现有的Nginx C模块进
行脚本编程，构建出可以处理一万以上并发请求的极高端性能的Web应用。

OpenResty致力于将你的服务器端应用完全运行于Nginx服务器中，充分利用Nginx的时间模
型来进行非阻塞I/O通信。不仅仅是和HTTP客户端间的网络通信是非阻塞的，与MySQL、
PostgreSQL、Memcached以及Redis等众多远方后端之间的网络通信也是非阻塞的。

因为OpenResty软件包的维护者也是其中打包的许多Nginx模块的作者，所以OpenResty可以确保所包含的所有组件可以可靠地协同工作。

OpenResty最早是雅虎中国的一个公司项目，起步与2007年10月。当时兴起了OpenAPI的热潮
，用于满足各种Web Service的需求，就诞生了OpenResty。在公司领导的支持下，最早的
OpenResty实现从一开始就开源。最初的定位是服务于公司外的开发者，像其他的OpenAPI那
样，但后来越来越多地是为雅虎中国的搜索产品提供内部服务。这是第一代的OenResty，当
时的想法是，提供一套抽象的web service,能够让用户利用这些web service构造出新的符
合他们具体业务需求的Web Service出来，所以有些“meta web service”的意味，包括数据
模型、查询、安全策略都可以通过这种meta web service来表达和配置。同时这种web 
servvice 也有意保持REST风格。与这种概念相对应的是纯AJAX的web应用，即web应用几
乎都是哟哦那个客户端JavaScript来编写，然后完全由web service让web应用“活”起来。用
户把.html,.js,.css,.jpg等静态文件下载到web browser中，然后js开始运行，跨域请求
雅虎提供的经过站长定制过的web service，然后应用就可以运行起来。不过随着后来的发
展，公司外的用户毕竟还是少数，于是应用的重点是为公司内部的其他团队提供web 
service,比如雅虎中国的全能搜索产品，及其外围的一些产品。从那以后，开发的重点便
放在了性能优化上面。章亦春在加入淘宝数据部门的量子团队之后，决定对OpenResty进行
重新设计和彻底重写，并把应用重点放在支持像量子统计这样的web产品上面，所以量子统
计3.0开始也几乎完全是web service驱动的纯AJAX应用。

这是第二代的OpenResty，一般称之为ngx_openresty,以便和第一代居于Perl和Haskell实现
的OpenResty加以区别。章亦春和他的同事王晓哲一起设计了第二代的OpenResty。在王晓哲
的提议下，选择基于Nginx和Lua进行开发。

为什么要取OpenResty这个名字呢？OpenResty最早是顺应OpenAPI的潮流做的，所以Open取
自“开放”之意，而Resty便是REST风格的意思。虽然后来也可以基于ngx_openresty实现任何
形式的web service或者传统的web应用。

也就是说Nginx不再是一个简单的静态网页服务器，也不再是一个简单的反向代理了。第二
代的openresty致力于通过一系列nginx模块，把nginx扩展为全功能的web应用服务器。

ngx_openresty是用户驱动的项目，后来也有不少国内用户的参与，从openresty.org的点击
量分布上看，国内和国外的点击量基本持平。
ngx_openresty目前两大应用目标：
1.通用目的的web应用服务器。在这个目标下，现有的web应用技术都可以算是和OpenResty
或多或少有些类似，比如Nodejs,PHP等。ngx_openresty的性能(包括内存使用和CPU效率)算
是最大的卖点之一。
2.Nginx的脚本扩展编程，用于构建灵活的Web应用网关和Web应用防火墙。有些类似的是
NetScaler。其优势在于Lua编程带来的巨大灵活性。

ngx_openresty从一开始就是公司实际的业务需求的产物。在过去的几年中的大部分开发工
作也是由国外许多公司和个人的实际业务需求驱动的。这种模型在实践中工作的非常好，可
以确保我们做的就是大家最迫切需要的。在此过程中，慢慢的形成了ngx_openresty的两大
应用方向，也就是前面提到的那两大方向。是我们的用户帮助我们确认了这两个方向，事实
上，这并不同于第一代OpenResty的方向，而是变得更加底层和更加通用了。

开源精神的核心是分享而非追求流行。毕竟开源界不是娱乐圈，也不是时尚圈。如果我们的
开源项目有越来越多的人开始使用，只是一个“happy accident”，我们自然会很高兴，但这
并不是我们真正追求的。

开放源码指示开源项目生命周期中的”万里长征第一步“，国内的许多开源项目止步于开放源
码，而没有后续投入长期的时间和精力去跟进响应用户的各种需求和反馈，但不免夭折。这
种现象在国外的不少开源项目中也很常见。

国外成功的开源项目比较多，或许跟许多发达国检的程序员们的精神状态有关系。比如我认
识的一些国外的黑客都非常心思单纯，热情似火。他们在精神上的束缚非常少，做起事来多
是不拘一格。有的人即便长期没有工作单纯靠抵押和捐赠过活，也会不遗余力地投身与开源
项目。而我接触到的国内许多程序员的精神负担一般比较重，经纪商的压力也比较大，自然
有”玩开源“的心思。

不过，国内也是有一些程序员有过国外优秀黑客素质的，而且他们通过网络和全球的黑客紧
密联系在一起，所以我们完全可以期待他们未来有振奋人心的产出。在互联网时代的今天，
或许按国界划分来讨论这样的问题会变得越来越不合时宜。

